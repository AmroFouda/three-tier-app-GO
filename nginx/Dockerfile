# Stage 1: Use official Nginx image as base
FROM nginx:1.25-alpine

# Set working directory
WORKDIR /etc/nginx

RUN rm -f /etc/nginx/conf.d/default.conf


# Copy your custom Nginx config file (weâ€™ll create it below)
COPY nginx.conf /etc/nginx/nginx.conf

# Copy SSL certificates (self-signed or real)
# generated by your generate-ssl.sh script
COPY certs/server.crt /etc/ssl/certs/server.crt
COPY certs/server.key /etc/ssl/private/server.key

# Expose HTTPS port
EXPOSE 443

# Run Nginx in the foreground (as PID 1)
CMD ["nginx", "-g", "daemon off;"]
